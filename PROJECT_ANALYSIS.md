# 项目现状分析报告 - RestClient

## 1. 概览
RestClient 是一个基于 React 19、TypeScript 和 Vite 6 构建的现代化 API 调试工具。虽然项目基础架构清晰且功能完整，但在工程化规范、代码解耦、质量保障等方面存在提升空间。

---

## 2. 发现的问题与改进建议

### 2.1 工程化与代码规范
*   **目录结构不标准**：
    *   **问题**：核心源文件（`App.tsx`, `index.tsx`, `types.ts`）直接散落在根目录。
    *   **改进**：应统一移动到 `src` 目录下，遵循标准的 React 项目组织结构。
*   **静态检查与格式化工具缺失**：
    *   **问题**：项目中没有配置 ESLint 和 Prettier，依赖中也缺乏相关包。
    *   **改进**：引入 ESLint (建议使用针对 React 19 的新版配置) 和 Prettier，并在 `package.json` 中增加 `lint` 和 `format` 脚本。
*   **脚本缺失**：
    *   **问题**：`package.json` 仅有基本的 `dev`, `build`, `preview` 脚本。
    *   **改进**：补充 `type-check`, `lint`, `format`, `test` 等脚本。

### 2.2 代码架构与质量
*   **组件逻辑高度耦合**：
    *   **问题**：`App.tsx` (约 440 行) 承担了过多的职责，包括状态管理、业务逻辑（文件夹/请求的 CRUD）、网络请求、主题语言切换等。
    *   **改进**：
        *   使用 **Custom Hooks** (如 `useRequests`, `useTheme`, `useI18n`) 将业务逻辑从 UI 组件中剥离。
        *   引入 **Service 层** 处理网络请求，不要在组件内部直接通过 `fetch` 实现复杂的代理逻辑。
*   **状态管理复杂性**：
    *   **问题**：使用原始的 `useState` 处理深层嵌套的对象（文件夹和请求列表），逻辑代码繁琐且易出错。
    *   **改进**：考虑使用 `useReducer` 管理复杂的状态集合，或者引入轻量级状态库如 `Zustand`。
*   **组件粒度过大**：
    *   **问题**：`Sidebar`, `RequestEditor`, `ResponsePanel` 等组件体积较大 (10KB - 20KB)，内部缺乏原子化拆分。
    *   **改进**：将大型组件细分为更小的原子组件（如 `MethodBadge`, `HeaderRow`, `FolderItem` 等），提高可维护性和代码复用。

### 2.3 质量保障与安全
*   **缺乏自动化测试**：
    *   **问题**：项目中完全没有单元测试或集成测试。
    *   **改进**：引入 `Vitest` 和 `React Testing Library`，针对工具类函数（`helpers.ts`）和核心逻辑（Request CRUD）编写测试。
*   **代理逻辑耦合与安全**：
    *   **问题**：CORS 代理服务器直接实现在 `vite.config.ts` 中。这虽然解决了开发环境问题，但代理没有对 `targetUrl` 进行验证。
    *   **改进**：对代理请求进行基本的安全校验，或者将代理逻辑拆分为独立的 Node.js 中间件，并在文档中说明生产环境的代理部署方案。
*   **错误边界逻辑不足**：
    *   **问题**：虽然有 try-catch，但缺乏全局 React Error Boundaries。
    *   **改进**：在顶层增加 `ErrorBoundary` 组件，防止某个子组件崩溃导致整个应用不可用。

### 2.4 文档与持续集成
*   **缺乏 CI/CD**：
    *   **问题**：没有配置 CI 流程来自动化运行 lint 和 type-check。
    *   **改进**：增加 GitHub Actions 配置，在提交代码或发起 PR 时自动进行静态检查和构建验证。

---

## 3. 优先级建议
1.  **高优先级**：重构目录结构 (移动至 `src`)，引入 ESLint/Prettier。
2.  **高优先级**：将 `App.tsx` 中的逻辑抽离至 Custom Hooks，降低主组件复杂度。
3.  **中优先级**：引入自动化测试框架并覆盖核心逻辑。
4.  **低优先级**：细化 UI 组件拆分，优化代理安全逻辑。
